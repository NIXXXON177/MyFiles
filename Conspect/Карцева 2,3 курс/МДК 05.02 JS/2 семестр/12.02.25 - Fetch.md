Коды состояний HTTP

5 классов
- 1хх (информационный) - запрос получен, продолжается обработка
- 2хх (успешно) - действие было успешно получено, понято и обработано
- 3хх (перенаправление) - для выполнения запроса должны быть предприняты дальнейшие действия
- 4хх (ошибка клиента) - запрос имеет плохой синтаксис или не может быть выполнен
- 5хх (ошибка сервера) - сервер не в состоянии выполнить допустимый запрос

JS может отправлять запросы на сервер и обновлять html

Метод fetch современный, мощный, не поддерживается старыми браузерами.

**Базовый синтаксис :**

```javascript
let promise = fetch(url, [options])
```

- **`url`** – URL для отправки запроса.
- **`options`** – дополнительные параметры: метод, заголовки и так далее.

Без `options` это простой GET-запрос, скачивающий содержимое по адресу `url`.

Процесс получения ответа обычно происходит в два этапа.

**Во-первых, `promise` выполняется с объектом встроенного класса [Response](https://fetch.spec.whatwg.org/#response-class) в качестве результата, как только сервер пришлёт заголовки ответа.**

На этом этапе мы можем проверить статус HTTP-запроса и определить, выполнился ли он успешно, а также посмотреть заголовки, но пока без тела ответа.

Промис завершается с ошибкой, если `fetch` не смог выполнить HTTP-запрос, например при ошибке сети или если нет такого сайта. HTTP-статусы 404 и 500 не являются ошибкой.

Мы можем увидеть HTTP-статус в свойствах ответа:

- **`status`** – код статуса HTTP-запроса, например 200.
- **`ok`** – логическое значение: будет `true`, если код HTTP-статуса в диапазоне 200-299.

**Во-вторых, для получения тела ответа нам нужно использовать дополнительный вызов метода.**

`Response` предоставляет несколько методов, основанных на промисах, для доступа к телу ответа в различных форматах:

- **`response.text()`** – читает ответ и возвращает как обычный текст,
- **`response.json()`** – декодирует ответ в формате JSON,
- **`response.formData()`** – возвращает ответ как объект `FormData` (разберём его в [следующей главе](https://learn.javascript.ru/formdata)),
- **`response.blob()`** – возвращает объект как [Blob](https://learn.javascript.ru/blob) (бинарные данные с типом),
- **`response.arrayBuffer()`** – возвращает ответ как [ArrayBuffer](https://learn.javascript.ru/arraybuffer-binary-arrays) (низкоуровневое представление бинарных данных),
- помимо этого, `response.body` – это объект [ReadableStream](https://streams.spec.whatwg.org/#rs-class), с помощью которого можно считывать тело запроса по частям. Мы рассмотрим и такой пример несколько позже.

# Сервер с git

Запустить сервер
```
$ node index
```

Сервер CMS запущен. Вы можете использовать его по адресу http://localhost:3000

Нажмите CTRL+C, чтобы остановить сервер

**Доступные методы:**
	- GET /api/goods - получить список товаров, в query параметр search можно передать поисковый запрос
	- POST /api/goods - создать товар, в теле запроса нужно передать объект {title: st
	- ring, description: string, price: number, discount?: number, count: number, unit
	- s: string, image?: string, category: string }
	- GET /api/goods/{id} - получить товар по его ID
	- PATCH /api/goods/{id} - изменить товар с ID, в теле запроса нужно передать объект {title:string, description: string, price: number, discount?: number, count:number, units: string, image?: string, category: string }
	- DELETE /api/goods/{id} - удалить товар по ID
	- GET /api/goods/discount - получить список дисконтных товаров
	- GET /api/goods/category/{category} - получить список товаров по категории
	- GET /api/categories - получить список категорий
	- GET /api/total - получить общую стоимость всех товаров

## Методы получения тела ответа:
- `responce.text()` - возвращает ответ как обычный текст
- `responce.json()` - декодирует ответ в формат JSON
- `responce.formData()` - возвращает ответ как объект FormData
- `responce.blob()` - возвращает ответ как Blob (бинарные данные с типом)
- `responce.arrayBuffer()` - возвращает ответ как ArrayBuffer (низкоуровневые данные с типом)

## Опции `fetch`:
- `method` - HTTP-метод
- `headers` - объект с запрашиваемыми заголовками (не все заголовки разрешены)
- `body` - данные для отправки (тело запроса) в виде текста, `FormData`, `BufferSource`, `Blob` или `UrlSearchParams`